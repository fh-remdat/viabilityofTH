# shapefiles to merge
flist <- list.files('additional_shapefiles/Files/selected/Additional_hunting_pas_per_country/', pattern = 'geojson', full.names = TRUE)
flist
library(sf)
library(tidyverse)
st_read("D:/Oloisukut Imagery/Land Parcel.geojson")
st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_buffer(0.01)
st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_extent() %>%
st_buffer(0.01)
st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_convex_hull() %>%
st_buffer(0.01)
st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_convex_hull() %>%
st_union() %>%
st_buffer(0.01)
?get_elev_raster
dems<-st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_convex_hull() %>%
st_union() %>%
st_buffer(0.1) %>%
elevatr::get_elev_raster(z=11)
dems
dems<-st_read("D:/Oloisukut Imagery/Land Parcel.geojson") %>%
st_convex_hull() %>%
st_union() %>%
st_buffer(0.1) %>%
st_as_sf() %>%
elevatr::get_elev_raster(z=11)
dems
plot(dems)
mapview::mapview(dems)
#!/usr/bin/env Rscript
###################################
#### Freddie Hunter 23 September ##
###################################
# Calculating potential revenue from REDD+ in PAs across subsaharan africa.
# import libraries
library(raster)
library(glue)
library(rgdal)
library(dplyr)
wd = '/home/freddie/Cloud_Free_Metrics/PA_paper/data'
setwd(wd)
aoi <- readOGR("fwpamastershapefile/3857_PAs_MasterFile_FEB2021.geojson")
crs(aoi)
aoi <- readOGR("shapefiles/combined_formatted_PAs_v1_4_nov_22.geojson")
aoi
plot(aoi)
crs(aoi)
####################################################################
# calculate carbon volume in PAs ----
####################################################################
# import gfw
gfw <- raster('gfw/gfw_loss_v2/gfw_2021_v1_9.tif')
loss <- raster('gfw/gfw_loss_v2/final_binary_regrid_gfw_loss_eq_lt_2010_1km.tif') # this file has 1 where the majority of 30m pixels in 1km pixel, had deforestation between 2001 and 2010.
1365037/364000
1365037/46194
library(raster)
library(glue)
library(rgdal)
library(dplyr)
library(sf)
library(terra)
library(mapview)
knitr::opts_chunk$set(echo = FALSE, warnings = F)
# Calculating potential revenue from REDD+ in PAs across subsaharan africa.
# import libraries
library(raster)
library(glue)
library(rgdal)
library(dplyr)
library(sf)
library(terra)
library(mapview)
aoi <- st_read("shapefiles/combined_formatted_PAs_v2_30_nov_22.geojson") %>%
mutate(TH_legal = as.factor(TH_legal))
aoi <- st_read("shapefiles/combined_formatted_PAs_v2_30_nov_22.geojson") %>%
mutate(TH_legal = as.factor(TH_legal))
mapview(aoi, zcol = "TH_legal")
mapview(aoi, zcol = "TH_legal")
gfw1 <- stack('gfw_data/gfw_2021_v1_9.tif')
gfw<-gfw1[[1]]
loss <- raster('gfw_data/regrid_sum_1km_2010_def_gfw_gee_v1.tif')  # values represent number of deforested 30 by 30 pixels
mapview(loss, maxpixels =  52620528)  + mapview(aoi)
gfw1 <- stack('gfw_data/gfw_2021_v1_9.tif')
gfw<-gfw1[[1]]
loss <- raster('gfw_data/regrid_sum_1km_2010_def_gfw_gee_v1.tif')  # values represent number of deforested 30 by 30 pixels
cp_gfw<-gfw
aoi <- st_transform(aoi, crs(gfw))
# crop gfw to pas
# cp_gfw <- mask(crop(gfw, aoi), aoi)
# #reclassify gfw N
# # mask out all pixels with less than a mean of 10% forest cover.
cp_gfw[cp_gfw = 0] <- NA
cp_gfw[cp_gfw > 0] <- 1
mapview(cp_gfw, maxpixels =  52620528)
mapview(cp_gfw)
mapview(cp_gfw)
cp_gfw[loss > 555] <- NA #555 represent the threshold for the majority of 30*30m pixels in a 1km*1km2
mapview(cp_gfw)
